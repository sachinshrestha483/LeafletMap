<template>
  <div class="d-flex flex-row bd-highlight mb-3">
    <div class="p-2 bd-highlight">
      <SearchSection
        :addMarkerFun="addMarker"
        :initialPosition="initialPosition"
        :finalPosition="finalPosition"
        :setFinalPosMarker="setFinalPosMarker"
        :setInitialPosMarker="setInitialPosMarker"
      />
    </div>
    <div class="p-2 bd-highlight">
      <div id="mapid" ref="map"></div>
    </div>
  </div>

  <!-- <div class="row">
    <div class="col-md-2">
      <SearchSection/>
    </div>

    <div class="col-md-10" >
      <div id="mapid" ref="map"></div>
    </div>
  </div> -->
</template>

<script>
import { onMounted, ref } from "vue";
// import 'node_modules/leaflet-geosearch/dist/geosearch.css';
import VueBootstrapTypeahead from "vue-bootstrap-typeahead";
import SearchSection from "@/components/SearchSection";
export default {
  components: {
    VueBootstrapTypeahead,
    SearchSection,
  },
  setup() {
    const map = ref(null);
    const initialPosition = ref({ lat: "", lan: "" });
    const finalPosition = ref({ lat: "", lan: "" });
    var prevInitalPositionPointer = null;
    var prevFinalPositionPointer = null;

    var mymap;
    onMounted(() => {
      console.log(map);
      console.log("Making The map");
      mymap = L.map(map.value).setView([23.3315, 75.0367], 5);
      const tileUrl = "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png";

      const attribution =
        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors';

      const tileLayer = L.tileLayer(tileUrl, { attribution });
      tileLayer.addTo(mymap);

      var latLangs = [
        [75.036696, 23.331498],
        [75.036699, 23.331494],
        [75.036701, 23.331475],
        [75.036694, 23.331457],
        [75.036674, 23.33144],
        [75.036648, 23.331435],
        [75.036628, 23.331441],
        [75.036602, 23.33149],
        [75.036611, 23.331508],
        [75.03663, 23.331522],
        [75.036655, 23.331527],
        [75.036674, 23.331522],
        [75.036689, 23.331511],
        [75.037742, 23.332564],
        [75.038579, 23.333345],
        [75.038826, 23.333482],
        [75.039167, 23.333672],
        [75.040724, 23.333801],
        [75.041937, 23.333757],
        [75.042892, 23.333723],
        [75.043898, 23.333662],
        [75.044589, 23.333582],
        [75.044841, 23.333513],
        [75.045054, 23.333452],
        [75.045075, 23.333478],
        [75.045106, 23.333495],
        [75.045142, 23.3335],
        [75.045205, 23.333472],
        [75.045224, 23.333444],
        [75.045229, 23.333411],
        [75.045478, 23.333309],
        [75.045683, 23.333222],
        [75.046419, 23.332885],
        [75.046436, 23.332902],
        [75.046488, 23.332918],
        [75.046542, 23.332908],
        [75.047198, 23.333469],
        [75.048426, 23.334555],
        [75.049134, 23.335187],
        [75.049162, 23.335204],
        [75.049209, 23.335211],
        [75.049539, 23.335475],
        [75.050332, 23.336177],
        [75.050865, 23.336647],
        [75.051021, 23.33668],
        [75.051275, 23.336663],
        [75.051386, 23.336653],
        [75.051515, 23.33666],
        [75.051601, 23.335682],
        [75.051766, 23.333363],
        [75.051817, 23.333066],
        [75.051908, 23.332695],
        [75.052042, 23.332424],
        [75.052152, 23.332214],
        [75.05219, 23.332181],
        [75.052213, 23.332138],
        [75.052221, 23.332091],
        [75.052371, 23.331942],
        [75.052468, 23.331814],
        [75.052541, 23.331709],
        [75.053811, 23.329884],
        [75.054249, 23.329255],
        [75.054733, 23.328561],
        [75.055461, 23.327514],
        [75.055749, 23.327093],
        [75.055773, 23.327057],
        [75.056195, 23.326463],
        [75.056747, 23.325683],
        [75.056897, 23.325471],
        [75.056905, 23.325386],
        [75.056962, 23.3253],
        [75.05702, 23.325215],
        [75.058089, 23.323631],
        [75.058203, 23.323456],
        [75.059009, 23.322305],
        [75.059667, 23.32139],
        [75.059707, 23.321325],
        [75.059819, 23.321244],
        [75.060124, 23.320768],
        [75.060758, 23.319838],
        [75.060817, 23.319748],
        [75.060858, 23.319689],
        [75.061736, 23.318421],
        [75.061942, 23.318114],
        [75.062518, 23.317274],
        [75.063038, 23.316513],
        [75.063412, 23.315975],
        [75.063578, 23.315724],
        [75.063617, 23.315656],
        [75.063718, 23.315453],
        [75.063865, 23.315128],
        [75.064081, 23.314566],
        [75.064177, 23.314322],
        [75.064274, 23.314076],
        [75.064761, 23.312771],
        [75.065177, 23.311633],
        [75.065259, 23.311407],
        [75.065566, 23.310569],
        [75.065681, 23.310253],
        [75.066172, 23.308945],
        [75.066367, 23.308478],
        [75.066604, 23.307938],
        [75.066985, 23.307194],
        [75.067266, 23.306745],
        [75.067827, 23.305947],
        [75.068205, 23.305437],
        [75.068876, 23.304481],
        [75.069171, 23.30406],
        [75.069553, 23.303511],
        [75.069841, 23.303105],
        [75.070665, 23.302016],
        [75.070737, 23.301942],
        [75.070855, 23.301855],
        [75.070987, 23.301792],
        [75.071154, 23.301735],
        [75.071262, 23.301713],
        [75.071271, 23.301616],
        [75.071317, 23.301305],
        [75.071354, 23.301138],
        [75.07142, 23.300957],
        [75.07152, 23.300771],
        [75.071551, 23.300721],
        [75.071694, 23.300493],
        [75.071838, 23.300338],
        [75.072163, 23.29999],
        [75.072218, 23.299941],
        [75.07293, 23.299229],
        [75.073341, 23.298809],
        [75.073505, 23.29866],
        [75.074645, 23.297625],
        [75.075332, 23.296874],
        [75.076211, 23.295801],
        [75.077263, 23.294471],
        [75.077432, 23.294241],
        [75.078336, 23.293011],
        [75.079001, 23.292046],
        [75.080117, 23.290351],
        [75.080782, 23.289407],
        [75.081404, 23.288441],
        [75.083121, 23.285909],
        [75.084059, 23.284383],
        [75.084259, 23.284084],
        [75.084468, 23.283773],
        [75.084595, 23.283589],
        [75.084771, 23.283378],
        [75.085037, 23.283107],
        [75.085664, 23.282572],
        [75.085877, 23.282391],
        [75.086612, 23.281799],
        [75.087005, 23.281434],
        [75.087343, 23.281005],
        [75.087488, 23.280776],
        [75.087623, 23.280533],
        [75.088168, 23.279503],
        [75.088233, 23.279348],
        [75.088513, 23.278742],
        [75.088862, 23.277909],
        [75.089931, 23.275502],
        [75.090073, 23.275246],
        [75.090687, 23.274367],
        [75.091022, 23.273874],
        [75.091082, 23.273786],
        [75.095074, 23.268417],
        [75.095782, 23.267438],
        [75.096318, 23.266727],
        [75.098785, 23.263336],
        [75.099219, 23.262713],
        [75.099412, 23.262346],
        [75.099471, 23.262196],
        [75.100146, 23.260049],
        [75.100438, 23.259102],
        [75.100796, 23.257961],
        [75.100833, 23.257843],
        [75.100861, 23.257759],
        [75.101005, 23.257308],
        [75.101124, 23.256925],
        [75.101172, 23.256787],
        [75.101227, 23.256612],
        [75.101328, 23.256373],
        [75.101476, 23.256085],
        [75.101619, 23.255863],
        [75.101946, 23.255463],
        [75.101979, 23.255426],
        [75.10216, 23.25523],
        [75.102643, 23.254717],
        [75.103153, 23.254184],
        [75.103725, 23.25359],
        [75.10418, 23.253118],
        [75.104447, 23.252841],
        [75.104593, 23.252689],
        [75.105105, 23.252179],
        [75.10565, 23.251636],
        [75.105816, 23.251471],
        [75.106222, 23.251074],
        [75.106319, 23.250979],
        [75.107729, 23.249544],
        [75.108118, 23.249138],
        [75.108801, 23.248426],
        [75.109169, 23.248042],
        [75.109662, 23.247586],
        [75.110278, 23.247059],
        [75.110607, 23.246786],
        [75.111142, 23.2463],
        [75.111337, 23.246109],
        [75.11182, 23.245586],
        [75.112345, 23.24496],
        [75.114447, 23.242897],
        [75.121587, 23.235877],
        [75.123916, 23.233575],
        [75.124174, 23.233324],
        [75.125773, 23.231805],
        [75.126382, 23.231237],
        [75.126904, 23.230677],
        [75.127308, 23.230203],
        [75.130048, 23.227462],
        [75.13013, 23.227374],
        [75.131871, 23.225636],
        [75.1322, 23.225157],
        [75.132267, 23.225011],
        [75.132448, 23.224618],
        [75.132611, 23.224087],
        [75.132684, 23.223757],
        [75.132708, 23.223321],
        [75.132656, 23.221091],
        [75.132602, 23.219509],
        [75.132594, 23.219246],
        [75.132578, 23.218665],
        [75.132563, 23.216433],
        [75.132608, 23.215708],
        [75.132781, 23.215023],
        [75.132818, 23.214921],
        [75.133247, 23.214123],
        [75.134271, 23.212638],
        [75.135482, 23.210672],
        [75.135561, 23.210544],
        [75.137358, 23.207833],
        [75.137729, 23.207287],
        [75.137834, 23.207131],
        [75.139789, 23.204219],
        [75.139861, 23.204111],
        [75.140216, 23.203584],
        [75.14132, 23.201857],
        [75.141358, 23.201792],
        [75.14148, 23.201459],
        [75.141545, 23.200663],
        [75.141567, 23.200246],
        [75.141634, 23.199901],
        [75.14172, 23.199655],
        [75.141905, 23.199297],
        [75.142155, 23.198976],
        [75.142238, 23.198869],
        [75.142818, 23.198149],
        [75.143161, 23.197746],
        [75.144136, 23.19654],
        [75.145424, 23.194983],
        [75.14669, 23.19344],
        [75.147494, 23.192473],
        [75.147605, 23.192339],
        [75.148058, 23.19178],
        [75.148405, 23.191392],
        [75.148786, 23.191046],
        [75.149172, 23.190787],
        [75.150323, 23.190078],
        [75.151839, 23.189139],
        [75.152357, 23.18881],
        [75.154864, 23.187177],
        [75.155556, 23.186732],
        [75.155725, 23.186623],
        [75.157185, 23.18573],
        [75.158072, 23.185122],
        [75.158992, 23.184342],
        [75.159728, 23.183658],
        [75.160714, 23.182742],
        [75.161497, 23.182015],
        [75.161952, 23.181593],
        [75.163407, 23.180229],
        [75.164318, 23.179389],
        [75.16489, 23.178861],
        [75.165671, 23.178188],
        [75.166394, 23.17752],
        [75.166542, 23.17738],
        [75.167367, 23.1766],
        [75.168546, 23.175495],
        [75.168633, 23.175414],
        [75.170576, 23.173594],
        [75.170727, 23.173453],
        [75.172362, 23.171922],
        [75.172458, 23.171832],
        [75.172728, 23.171579],
        [75.174316, 23.170086],
        [75.176917, 23.167661],
        [75.177041, 23.167546],
        [75.178172, 23.166491],
        [75.178279, 23.166392],
        [75.179929, 23.164854],
        [75.181781, 23.163137],
        [75.182611, 23.162401],
        [75.182739, 23.16228],
        [75.183563, 23.161507],
        [75.184634, 23.160525],
        [75.185574, 23.159649],
        [75.185946, 23.159275],
        [75.185996, 23.159226],
        [75.186104, 23.159075],
        [75.186198, 23.158895],
        [75.186475, 23.158178],
        [75.186579, 23.157905],
        [75.186852, 23.157227],
        [75.187599, 23.155318],
        [75.187783, 23.154848],
        [75.188003, 23.154231],
        [75.18818, 23.153903],
        [75.188792, 23.152928],
        [75.189911, 23.151148],
        [75.19061, 23.150033],
        [75.191267, 23.148968],
        [75.191747, 23.148114],
        [75.192015, 23.147639],
        [75.192825, 23.146342],
        [75.193125, 23.145907],
        [75.193574, 23.145255],
        [75.193633, 23.145162],
        [75.194393, 23.14396],
        [75.195767, 23.141747],
        [75.196265, 23.140917],
        [75.197632, 23.13864],
        [75.197812, 23.13834],
        [75.197857, 23.138266],
        [75.198131, 23.137831],
        [75.19853, 23.137164],
        [75.199865, 23.135025],
        [75.200003, 23.134767],
        [75.200182, 23.134345],
        [75.200289, 23.134034],
        [75.200383, 23.133641],
        [75.200593, 23.132146],
        [75.201518, 23.126211],
        [75.201593, 23.125732],
        [75.202258, 23.121461],
        [75.202524, 23.119757],
        [75.202565, 23.119509],
        [75.202631, 23.119114],
        [75.202757, 23.118356],
        [75.203016, 23.11667],
        [75.203044, 23.116478],
        [75.203249, 23.115308],
        [75.203358, 23.114556],
        [75.203382, 23.114391],
        [75.203794, 23.111069],
        [75.203897, 23.110246],
        [75.203908, 23.110157],
        [75.203942, 23.109914],
        [75.204385, 23.106799],
        [75.204526, 23.105787],
        [75.204615, 23.105153],
        [75.204888, 23.103191],
        [75.20514, 23.10147],
        [75.205265, 23.100614],
        [75.205399, 23.099694],
        [75.205513, 23.098833],
        [75.205566, 23.098577],
        [75.205601, 23.098411],
        [75.205704, 23.09812],
        [75.205863, 23.097747],
        [75.206237, 23.097238],
        [75.206389, 23.097032],
        [75.206499, 23.096883],
        [75.207018, 23.09618],
        [75.207749, 23.095231],
        [75.208305, 23.094644],
        [75.208986, 23.094076],
        [75.209694, 23.093533],
        [75.210369, 23.093057],
        [75.210921, 23.092618],
        [75.211227, 23.09229],
        [75.211687, 23.091673],
        [75.212419, 23.090686],
        [75.212735, 23.09026],
        [75.213805, 23.088785],
        [75.219674, 23.080485],
        [75.220903, 23.078786],
        [75.222384, 23.07671],
        [75.222569, 23.076426],
        [75.22957, 23.066697],
        [75.232022, 23.063339],
        [75.234457, 23.059943],
        [75.237295, 23.056028],
        [75.244221, 23.046333],
        [75.245889, 23.044015],
        [75.248538, 23.040332],
        [75.24904, 23.039443],
        [75.249336, 23.038768],
        [75.249553, 23.038053],
        [75.250254, 23.032446],
        [75.25077, 23.0276],
        [75.25129, 23.022985],
        [75.251371, 23.022364],
        [75.251947, 23.017965],
        [75.251958, 23.017424],
        [75.251865, 23.013585],
        [75.251932, 23.012093],
        [75.252103, 23.01097],
        [75.252397, 23.009228],
        [75.252822, 23.0067],
        [75.252855, 23.006507],
        [75.253882, 23.001215],
        [75.256213, 22.982852],
        [75.257007, 22.975377],
        [75.257104, 22.974337],
        [75.257173, 22.973073],
        [75.257111, 22.971436],
        [75.257095, 22.971025],
        [75.256823, 22.968912],
        [75.25619, 22.965019],
        [75.255673, 22.961839],
        [75.254586, 22.954863],
        [75.254245, 22.952973],
        [75.253303, 22.951083],
        [75.253012, 22.950259],
        [75.252919, 22.949662],
        [75.252964, 22.949085],
        [75.25313, 22.948131],
        [75.25326, 22.947038],
        [75.253028, 22.944705],
        [75.252203, 22.939737],
        [75.25126, 22.933447],
        [75.250978, 22.931265],
        [75.250792, 22.930403],
        [75.2505, 22.928788],
        [75.248178, 22.913375],
        [75.24776, 22.910938],
        [75.247611, 22.908725],
        [75.247403, 22.899057],
        [75.247397, 22.896458],
        [75.247113, 22.882212],
        [75.246954, 22.874249],
        [75.246902, 22.871605],
        [75.246867, 22.868898],
        [75.246905, 22.866088],
        [75.247497, 22.862257],
        [75.249238, 22.851002],
        [75.249837, 22.846327],
        [75.250542, 22.84384],
        [75.251668, 22.841698],
        [75.253893, 22.837275],
        [75.264043, 22.816873],
        [75.26621, 22.812742],
        [75.267983, 22.81104],
        [75.271473, 22.807905],
        [75.276362, 22.803658],
        [75.281164, 22.799369],
        [75.281726, 22.798867],
        [75.282668, 22.798025],
        [75.284155, 22.796978],
        [75.286112, 22.796306],
        [75.290558, 22.79491],
        [75.29257, 22.79423],
        [75.29437, 22.793113],
        [75.295975, 22.792032],
        [75.296494, 22.791657],
        [75.297392, 22.79101],
        [75.316191, 22.778427],
        [75.318324, 22.77697],
        [75.324996, 22.772413],
        [75.342983, 22.7603],
        [75.345215, 22.758858],
        [75.347162, 22.757738],
        [75.347578, 22.757567],
        [75.35414, 22.754868],
        [75.374016, 22.746246],
        [75.374681, 22.746086],
        [75.3758, 22.745972],
        [75.392127, 22.744451],
        [75.39755, 22.743842],
        [75.400405, 22.743563],
        [75.405731, 22.742856],
        [75.406957, 22.742756],
        [75.408415, 22.742892],
        [75.409577, 22.742999],
        [75.410447, 22.743079],
        [75.410811, 22.743076],
        [75.410967, 22.743085],
        [75.411411, 22.74311],
        [75.411874, 22.743097],
        [75.412291, 22.743042],
        [75.412793, 22.742926],
        [75.413257, 22.742729],
        [75.413769, 22.742427],
        [75.414529, 22.741754],
        [75.4148, 22.741378],
        [75.415071, 22.74093],
        [75.415609, 22.739769],
        [75.415662, 22.739658],
        [75.416289, 22.738347],
        [75.418515, 22.733692],
        [75.426787, 22.717758],
        [75.428383, 22.714808],
        [75.43512, 22.70171],
        [75.43558, 22.700972],
        [75.436057, 22.700297],
        [75.436742, 22.699505],
        [75.438325, 22.697516],
        [75.440073, 22.695382],
        [75.441628, 22.69335],
        [75.446435, 22.68748],
        [75.446848, 22.687064],
        [75.447289, 22.68672],
        [75.447932, 22.68636],
        [75.465586, 22.677494],
        [75.46574, 22.677416],
        [75.466867, 22.676845],
        [75.469541, 22.675507],
        [75.469949, 22.675289],
        [75.470329, 22.675129],
        [75.470882, 22.674989],
        [75.471979, 22.674792],
        [75.477189, 22.674025],
        [75.478412, 22.673828],
        [75.479723, 22.67355],
        [75.491033, 22.669968],
        [75.492678, 22.669573],
        [75.495667, 22.66899],
        [75.496733, 22.6685],
        [75.497892, 22.667897],
        [75.499282, 22.667385],
        [75.507032, 22.66589],
        [75.508343, 22.666011],
        [75.512908, 22.66726],
        [75.514942, 22.667817],
        [75.517217, 22.668397],
        [75.518281, 22.668668],
        [75.51923, 22.668935],
        [75.521331, 22.669513],
        [75.524197, 22.670275],
        [75.526913, 22.670761],
        [75.534963, 22.671867],
        [75.535588, 22.671823],
        [75.535673, 22.671806],
        [75.535754, 22.671757],
        [75.536555, 22.672063],
        [75.537628, 22.672306],
        [75.539626, 22.672502],
        [75.542523, 22.672818],
        [75.551363, 22.673897],
        [75.552195, 22.674038],
        [75.553477, 22.674254],
        [75.555515, 22.674521],
        [75.559973, 22.675046],
        [75.568964, 22.676169],
        [75.570922, 22.676516],
        [75.572306, 22.676927],
        [75.573492, 22.677328],
        [75.575927, 22.678095],
        [75.576716, 22.67856],
        [75.578759, 22.680228],
        [75.579414, 22.680624],
        [75.580192, 22.680896],
        [75.581136, 22.681139],
        [75.58195, 22.681394],
        [75.584236, 22.682109],
        [75.586009, 22.682619],
        [75.586594, 22.68272],
        [75.587216, 22.682747],
        [75.589386, 22.682683],
        [75.592704, 22.682611],
        [75.593992, 22.682686],
        [75.595209, 22.682908],
        [75.596996, 22.68318],
        [75.597582, 22.683266],
        [75.598015, 22.683329],
        [75.598653, 22.683354],
        [75.599292, 22.683304],
        [75.599839, 22.68324],
        [75.600949, 22.683012],
        [75.60192, 22.682686],
        [75.603031, 22.68224],
        [75.604323, 22.681522],
        [75.605139, 22.681052],
        [75.606158, 22.680636],
        [75.607735, 22.680384],
        [75.609511, 22.680226],
        [75.611211, 22.680176],
        [75.611409, 22.680189],
        [75.612273, 22.680245],
        [75.613212, 22.68031],
        [75.614146, 22.680498],
        [75.614838, 22.680736],
        [75.615454, 22.680948],
        [75.618078, 22.682374],
        [75.619585, 22.683146],
        [75.621565, 22.684032],
        [75.622777, 22.684522],
        [75.624617, 22.685135],
        [75.625974, 22.685447],
        [75.626741, 22.685526],
        [75.62723, 22.685546],
        [75.627653, 22.685538],
        [75.628123, 22.685497],
        [75.629324, 22.685284],
        [75.633723, 22.6842],
        [75.637049, 22.683339],
        [75.639608, 22.682601],
        [75.641271, 22.682161],
        [75.641383, 22.682131],
        [75.644817, 22.68126],
        [75.64744, 22.680612],
        [75.648127, 22.680354],
        [75.648738, 22.679993],
        [75.649408, 22.679429],
        [75.651288, 22.677887],
        [75.653126, 22.67638],
        [75.655996, 22.674157],
        [75.657284, 22.673326],
        [75.658292, 22.672841],
        [75.659279, 22.672459],
        [75.660481, 22.672197],
        [75.662224, 22.671999],
        [75.664907, 22.672088],
        [75.666591, 22.672207],
        [75.668467, 22.672352],
        [75.670378, 22.672499],
        [75.671387, 22.672722],
        [75.67357, 22.673385],
        [75.677373, 22.674642],
        [75.678672, 22.675117],
        [75.679299, 22.675439],
        [75.679851, 22.675791],
        [75.68027, 22.676058],
        [75.681332, 22.676617],
        [75.682014, 22.676894],
        [75.682807, 22.677083],
        [75.683875, 22.677147],
        [75.684717, 22.677068],
        [75.685495, 22.67688],
        [75.686284, 22.676553],
        [75.687448, 22.675855],
        [75.688762, 22.675004],
        [75.690168, 22.674469],
        [75.690817, 22.67438],
        [75.691096, 22.674371],
        [75.692158, 22.674335],
        [75.693078, 22.674476],
        [75.696677, 22.675105],
        [75.697509, 22.67517],
        [75.698383, 22.675184],
        [75.701012, 22.674937],
        [75.702036, 22.674967],
        [75.703501, 22.675179],
        [75.705333, 22.675578],
        [75.707055, 22.676005],
        [75.707475, 22.676108],
        [75.708019, 22.676247],
        [75.708691, 22.676427],
        [75.709015, 22.676529],
        [75.709323, 22.676645],
        [75.709673, 22.676811],
        [75.709997, 22.676999],
        [75.710437, 22.67731],
        [75.710895, 22.67768],
        [75.711263, 22.678022],
        [75.711649, 22.678382],
        [75.712603, 22.67932],
        [75.712992, 22.679669],
        [75.71463, 22.681283],
        [75.714878, 22.68152],
        [75.715563, 22.682192],
        [75.716127, 22.68271],
        [75.716463, 22.682929],
        [75.716797, 22.683114],
        [75.717049, 22.683228],
        [75.717371, 22.683342],
        [75.717752, 22.683451],
        [75.718046, 22.683515],
        [75.718438, 22.683559],
        [75.720084, 22.683552],
        [75.721264, 22.683498],
        [75.722595, 22.683456],
        [75.722835, 22.683448],
        [75.723238, 22.683393],
        [75.723845, 22.683244],
        [75.72415, 22.683142],
        [75.724592, 22.682924],
        [75.724964, 22.682695],
        [75.725403, 22.682361],
        [75.725628, 22.682168],
        [75.726292, 22.681595],
        [75.726677, 22.681311],
        [75.72693, 22.681158],
        [75.727267, 22.68098],
        [75.727773, 22.680771],
        [75.728085, 22.680666],
        [75.728506, 22.680559],
        [75.728959, 22.680483],
        [75.72934, 22.680447],
        [75.729858, 22.680439],
        [75.730209, 22.680435],
        [75.731323, 22.680424],
        [75.735818, 22.680414],
        [75.736038, 22.680415],
        [75.737739, 22.680419],
        [75.737963, 22.680416],
        [75.738834, 22.680403],
        [75.739098, 22.680399],
        [75.740367, 22.68038],
        [75.742164, 22.680373],
        [75.742545, 22.680372],
        [75.744669, 22.680365],
        [75.746016, 22.680351],
        [75.749041, 22.68032],
        [75.749584, 22.68031],
        [75.751359, 22.680313],
        [75.751793, 22.680341],
        [75.752076, 22.68039],
        [75.752364, 22.680454],
        [75.752541, 22.680497],
        [75.75278, 22.680574],
        [75.753395, 22.680811],
        [75.753732, 22.680967],
        [75.754392, 22.681277],
        [75.754521, 22.681334],
        [75.757198, 22.682543],
        [75.757493, 22.682669],
        [75.759251, 22.683388],
        [75.760234, 22.683831],
        [75.760501, 22.683962],
        [75.761519, 22.684522],
        [75.761553, 22.684544],
        [75.761652, 22.684607],
        [75.761928, 22.684782],
        [75.7623, 22.685018],
        [75.764232, 22.686206],
        [75.765333, 22.686909],
        [75.76778, 22.688374],
        [75.768008, 22.688509],
        [75.76834, 22.688717],
        [75.768668, 22.688911],
        [75.768941, 22.689083],
        [75.769527, 22.689456],
        [75.769992, 22.689716],
        [75.770282, 22.689853],
        [75.770593, 22.689977],
        [75.771021, 22.690136],
        [75.771414, 22.690269],
        [75.772062, 22.690455],
        [75.772596, 22.690609],
        [75.774418, 22.691142],
        [75.775362, 22.691425],
        [75.775728, 22.691536],
        [75.775946, 22.691603],
        [75.777572, 22.692068],
        [75.777747, 22.69212],
        [75.777978, 22.692188],
        [75.778338, 22.692303],
        [75.778728, 22.692458],
        [75.779286, 22.692782],
        [75.779444, 22.692878],
        [75.780218, 22.69335],
        [75.780323, 22.693413],
        [75.782016, 22.694382],
        [75.7834, 22.695175],
        [75.783974, 22.69549],
        [75.786116, 22.696706],
        [75.786641, 22.696998],
        [75.786781, 22.697054],
        [75.786912, 22.697081],
        [75.787094, 22.697093],
        [75.787271, 22.697075],
        [75.787676, 22.696975],
        [75.787817, 22.696933],
        [75.787943, 22.696896],
        [75.788417, 22.696752],
        [75.788896, 22.696653],
        [75.789123, 22.696646],
        [75.78932, 22.696688],
        [75.789407, 22.696727],
        [75.789716, 22.696939],
        [75.789842, 22.697025],
        [75.790053, 22.697159],
        [75.790436, 22.697333],
        [75.790592, 22.697377],
        [75.790779, 22.697421],
        [75.790992, 22.697473],
        [75.791219, 22.697523],
        [75.791861, 22.69766],
        [75.792167, 22.697727],
        [75.792473, 22.697791],
        [75.793597, 22.698045],
        [75.793897, 22.698136],
        [75.794405, 22.698303],
        [75.794628, 22.698394],
        [75.795704, 22.698918],
        [75.796625, 22.699355],
        [75.79677, 22.699422],
        [75.797322, 22.699666],
        [75.797595, 22.699791],
        [75.79788, 22.699896],
        [75.798226, 22.699994],
        [75.798914, 22.700185],
        [75.79987, 22.700461],
        [75.800813, 22.70072],
        [75.801925, 22.701042],
        [75.802334, 22.701146],
        [75.803922, 22.701612],
        [75.804163, 22.701678],
        [75.80456, 22.701797],
        [75.80515, 22.701973],
        [75.805736, 22.702145],
        [75.806121, 22.70225],
        [75.807793, 22.70273],
        [75.808357, 22.702886],
        [75.808978, 22.70306],
        [75.809092, 22.703093],
        [75.809651, 22.703246],
        [75.809998, 22.703338],
        [75.810326, 22.703431],
        [75.810668, 22.703523],
        [75.811365, 22.703722],
        [75.811669, 22.703805],
        [75.811855, 22.703856],
        [75.811991, 22.703892],
        [75.812192, 22.703946],
        [75.812294, 22.703975],
        [75.812835, 22.704157],
        [75.813464, 22.704409],
        [75.814438, 22.704911],
        [75.814944, 22.705136],
        [75.81521, 22.705233],
        [75.815419, 22.705282],
        [75.81556, 22.705289],
        [75.816982, 22.705272],
        [75.817175, 22.705299],
        [75.817491, 22.705379],
        [75.818034, 22.705572],
        [75.818895, 22.705848],
        [75.819303, 22.705979],
        [75.81977, 22.706152],
        [75.820297, 22.706321],
        [75.820505, 22.706377],
        [75.820689, 22.706427],
        [75.821043, 22.706474],
        [75.821514, 22.70652],
        [75.821847, 22.706557],
        [75.822034, 22.70658],
        [75.822273, 22.706615],
        [75.822551, 22.706695],
        [75.822743, 22.706771],
        [75.823067, 22.706892],
        [75.823388, 22.707008],
        [75.823522, 22.707053],
        [75.824169, 22.70727],
        [75.824281, 22.707302],
        [75.824326, 22.707315],
        [75.824467, 22.707361],
        [75.824648, 22.707421],
        [75.824793, 22.707469],
        [75.825864, 22.707786],
        [75.825973, 22.70783],
        [75.82701, 22.708152],
        [75.827469, 22.708308],
        [75.827748, 22.708402],
        [75.828792, 22.70874],
        [75.829567, 22.709068],
        [75.829876, 22.709162],
        [75.830097, 22.70929],
        [75.830901, 22.709753],
        [75.830989, 22.709803],
        [75.831356, 22.710006],
        [75.831707, 22.710199],
        [75.831852, 22.710279],
        [75.832028, 22.710354],
        [75.832481, 22.710547],
        [75.83251, 22.710559],
        [75.833455, 22.710939],
        [75.833775, 22.711047],
        [75.834642, 22.711392],
        [75.83534, 22.71167],
        [75.835662, 22.711799],
        [75.836746, 22.712191],
        [75.837857, 22.712594],
        [75.83792, 22.712609],
        [75.8386, 22.712751],
        [75.839507, 22.712954],
        [75.839795, 22.712996],
        [75.840218, 22.713046],
        [75.840447, 22.713073],
        [75.840553, 22.713091],
        [75.840548, 22.713708],
        [75.840504, 22.714714],
        [75.840527, 22.714946],
        [75.840566, 22.715189],
        [75.840559, 22.715203],
        [75.840553, 22.715228],
        [75.840556, 22.715254],
        [75.840565, 22.715278],
        [75.840517, 22.715457],
        [75.840519, 22.71573],
        [75.84054, 22.715838],
        [75.840588, 22.716142],
        [75.840678, 22.716643],
        [75.840716, 22.717185],
        [75.840778, 22.717682],
        [75.840793, 22.717774],
        [75.840965, 22.718176],
        [75.841092, 22.718557],
        [75.841168, 22.71878],
        [75.841231, 22.718969],
        [75.841509, 22.720012],
        [75.841561, 22.72026],
        [75.841577, 22.720479],
        [75.841611, 22.720608],
        [75.841703, 22.720776],
        [75.841779, 22.720922],
        [75.841829, 22.72102],
        [75.841944, 22.721239],
        [75.842092, 22.721466],
        [75.84224, 22.721686],
        [75.842344, 22.721912],
        [75.842531, 22.722268],
        [75.842657, 22.722471],
        [75.842737, 22.722565],
        [75.842848, 22.722658],
        [75.842932, 22.722726],
        [75.843056, 22.722803],
        [75.843236, 22.72287],
        [75.843484, 22.722941],
        [75.843782, 22.722987],
        [75.844131, 22.72301],
        [75.844429, 22.723],
        [75.844686, 22.722995],
        [75.844776, 22.722993],
        [75.844918, 22.722983],
        [75.84513, 22.723042],
        [75.845232, 22.723112],
        [75.845328, 22.723119],
        [75.845402, 22.723104],
        [75.845513, 22.723027],
        [75.845595, 22.722932],
        [75.845688, 22.72292],
        [75.845752, 22.722904],
        [75.845782, 22.722891],
        [75.846021, 22.722781],
        [75.846179, 22.722767],
        [75.847122, 22.722798],
        [75.847308, 22.722787],
        [75.84796, 22.722747],
        [75.848561, 22.72267],
        [75.848705, 22.722662],
        [75.848987, 22.722631],
        [75.849268, 22.722601],
        [75.849334, 22.722595],
        [75.849568, 22.722551],
        [75.849746, 22.722502],
        [75.850005, 22.722454],
        [75.85021, 22.72244],
        [75.850549, 22.722408],
        [75.850807, 22.722377],
        [75.85096, 22.722361],
        [75.851106, 22.722356],
        [75.851314, 22.722345],
        [75.851598, 22.722333],
        [75.852061, 22.722361],
        [75.852359, 22.722373],
        [75.852555, 22.722409],
        [75.852633, 22.722424],
        [75.853009, 22.72253],
        [75.853629, 22.722732],
        [75.853968, 22.722857],
        [75.854133, 22.72286],
        [75.854448, 22.722857],
        [75.854589, 22.722831],
        [75.854687, 22.7228],
        [75.854948, 22.722712],
        [75.855143, 22.722654],
        [75.855295, 22.722617],
        [75.855417, 22.7226],
        [75.85553, 22.722599],
        [75.855608, 22.722604],
        [75.856105, 22.72261],
        [75.856174, 22.722615],
        [75.856563, 22.722617],
        [75.85671, 22.722628],
        [75.856799, 22.722633],
        [75.856883, 22.722638],
        [75.857091, 22.722653],
        [75.857449, 22.722742],
        [75.857602, 22.722809],
        [75.857951, 22.722961],
        [75.858062, 22.723012],
        [75.858191, 22.723069],
        [75.858472, 22.723253],
        [75.858543, 22.723301],
        [75.85898, 22.723539],
        [75.859025, 22.723552],
        [75.859074, 22.723604],
        [75.859165, 22.723621],
        [75.859183, 22.723541],
        [75.859217, 22.723429],
        [75.85923, 22.72332],
        [75.859124, 22.722201],
        [75.85911, 22.722108],
        [75.858989, 22.721777],
        [75.858948, 22.721682],
        [75.858847, 22.721472],
        [75.85877, 22.721315],
        [75.858717, 22.721146],
        [75.85865, 22.72087],
        [75.858592, 22.720632],
        [75.858549, 22.719965],
        [75.858573, 22.719799],
        [75.858529, 22.719777],
        [75.858493, 22.719758],
        [75.858398, 22.719719],
        [75.857873, 22.719538],
        [75.857741, 22.719491],
        [75.857706, 22.719578],
        [75.857699, 22.7196],
      ];

      const arr = latLangs.map((x) => x.reverse());
      var polyline = L.polyline(latLangs, { color: "red" }).addTo(mymap);
      mymap.fitBounds(polyline.getBounds());
    });

    const setInitialPosMarker = (lat, lon) => {
      prevInitalPositionPointer;

      
    };
    const setFinalPosMarker = (lat, lon) => {
      prevFinalPositionPointer;
    };

    const addMarker = (lat, lon) => {
      console.log(lat);
      console.log(lon);
      var markerOptions = {
        title: "MyLocation",
        clickable: true,
        draggable: true,
      };
      console.log("Add Marker");
      var marker = L.marker([lat, lon], markerOptions);
      marker.on("moveend", function (e) {
        console.log("marker drag event");
        console.log(e.target._latlng);
        // console.log("new Lat lng:"+e.latlng)
      });
      // Adding marker to the map
      marker.addTo(mymap);
    };

    return {
      map,
      addMarker,
      initialPosition,
      finalPosition,
      setInitialPosMarker,
      setFinalPosMarker,

    };
  },
};
</script>

<style>
#mapid {
  height: 100vh;
  width: 1000px;
}

/* #mapdiv{
  width: 400px;

} */
</style>